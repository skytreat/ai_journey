@model List<Web.WebPortal.Controllers.IpVm>
@{
	ViewData["Title"] = "IP Addresses";
	var addressSpaceId = ViewBag.AddressSpaceId;
	var pagination = ViewBag.Pagination as IPAM.Contracts.PaginatedResult<Web.WebPortal.Controllers.IpVm>;
}

<div class="d-flex justify-content-between align-items-center mb-4">
	<h1><i class="bi bi-hdd-network"></i> IP Addresses for Address Space</h1>
	<div>
		<a href="/Ip/Create?addressSpaceId=@addressSpaceId" class="btn btn-primary">
			<i class="bi bi-plus-circle"></i> Create New IP
		</a>
		<a href="/" class="btn btn-outline-secondary">
			<i class="bi bi-arrow-left"></i> Back to Address Spaces
		</a>
	</div>
</div>

@if (Model.Any())
{
	<div class="card">
		<div class="card-body">
			<div class="table-responsive">
				<table class="table table-striped table-hover">
					<thead class="table-light">
						<tr>
							<th><i class="bi bi-hash"></i> ID</th>
							<th><i class="bi bi-diagram-3"></i> CIDR Prefix</th>
							<th><i class="bi bi-gear"></i> Actions</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var item in Model)
						{
							<tr>
								<td><code class="text-muted">@item.Id.ToString("N")</code></td>
								<td><code class="text-primary">@item.Prefix</code></td>
								<td>
									<div class="btn-group" role="group">
										<a href="/Ip/Edit?addressSpaceId=@addressSpaceId&id=@item.Id" class="btn btn-sm btn-outline-warning">
											<i class="bi bi-pencil"></i> Edit
										</a>
										<form method="post" action="/Ip/Delete?addressSpaceId=@addressSpaceId&id=@item.Id" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete IP \'@item.Prefix\'?')">
											<button type="submit" class="btn btn-sm btn-outline-danger">
												<i class="bi bi-trash"></i> Delete
											</button>
										</form>
									</div>
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
	</div>

	@if (pagination != null)
	{
		@await Html.PartialAsync("_Pagination", pagination)
	}
}
else
{
	<div class="text-center py-5">
		<i class="bi bi-hdd-network display-1 text-muted"></i>
		<h3 class="text-muted mt-3">No IP Addresses Found</h3>
		<p class="text-muted">This address space doesn't have any IP addresses yet.</p>
		<a href="/Ip/Create?addressSpaceId=@addressSpaceId" class="btn btn-primary btn-lg">
			<i class="bi bi-plus-circle"></i> Create First IP
		</a>
	</div>
}
